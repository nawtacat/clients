<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="icon" type="image/jpg" href="https://pha.am/rounded_favicon.png">
    <link rel="stylesheet" href="/thestyle.css">

    <script type="module">
        // Import Firebase Modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAbnPpcIt88B0jIAoLUdC71zmQDvR_fdu8",
            authDomain: "physmathacademy-722b3.firebaseapp.com",
            projectId: "physmathacademy-722b3",
            storageBucket: "physmathacademy-722b3.appspot.com",
            messagingSenderId: "1093649922622",
            appId: "1:1093649922622:web:35b1bf4d2364bcf745f587",
            measurementId: "G-CGVKXTXJLB"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // ‚úÖ Ensure User is Logged In & Redirect Based on Email (Avoid Redirect Loops)
        onAuthStateChanged(auth, (user) => {
            if (!user) {
                // Not logged in ‚Üí Redirect to login page
                if (window.location.pathname !== "/login") {
                    window.location.href = "/login";
                }
            } else {
                const userEmail = user.email;
                const currentPath = window.location.pathname;

                // ‚úÖ Redirect only if NOT already on the correct page
                if (userEmail === "info@pha.am" && currentPath !== "/PhysmathA") {
                    window.location.href = "/PhysmathA";
                } else if (userEmail !== "info@pha.am" && currentPath !== "/profile") {
                    window.location.href = "/profile";
                }
            }
        });

        // üö™ Logout Function
        function logout() {
            signOut(auth).then(() => {
                window.location.href = "/login"; // Redirect to login after logout
            }).catch((error) => {
                console.error("Logout failed:", error);
            });
        }

        // Expose logout function globally for button click
        window.logout = logout;
    </script>
</head>
<body>
    <div class="container">
        <img src="https://pha.am/rounded_favicon.png" alt="PhA Logo" class="profile-image">
        
        <div class="id-container">
            <h2>511639</h2>
            <img src="https://pha.am/cloud.png" alt="Install App" class="install-icon" id="installIcon">
        </div>

        <p class="description">‘≤’°÷Ä’´ ’£’°’¨’∏÷Ç’Ω’ø, ’Ñ’°÷Ä’´’∂’°÷â ’ç’° ’Å’•÷Ä ’•÷Ä’•’≠’°’µ’´ ’°’∂’∞’°’ø’°’Ø’°’∂’°÷Å’æ’°’Æ PhA ’æ’°’∞’°’∂’°’Ø’∂ ’ß</p>
        
        <a class="buttonO" href="https://pha.am/homework/">‘π’•’Ω’ø’°’µ’´’∂ ’°’∑’≠’°’ø’°’∂÷Ñ</a>
        <a class="button" href="https://meet.google.com/uko-nxgb-nuf">’Ñ’´’°’∂’°’¨ ’§’°’Ω’´’∂</a>
        <a class="button" href="https://calendar.google.com/calendar/embed?src=441cbb27cfab02a3190e10174dcfeab17f03d8a67da61df498b57918a56f0270%40group.calendar.google.com&ctz=Asia%2FYerevan">’Ä’°’≥’°’≠’∏÷Ç’©’µ’∏÷Ç’∂</a>
        <a class="button" href="#" onclick="checkSubscription()">‘≤’°’™’°’∂’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂</a>
        <a class="button" href="https://invite.viber.com/?g2=AQAYUchWgqzljlQ7yDrGFe13X2ZDWJdjYJJtUvzMw9UWb08m7dWDP2P%2BFcabN3fX">’Ä’°’¥’°’µ’∂÷Ñ</a>
        <button class="button logout-btn" onclick="logout()">‘¥’∏÷Ç÷Ä’Ω ’£’°’¨</button>
    </div>

    <script>
        function checkSubscription() {
            alert('’Å’•÷Ä ’¢’°’™’°’∂’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’® ‘±‘ø’è‘ª’é ’ß ’¥’´’∂’π÷á 01.03.2025');
        }
    </script>
</body>
</html>

